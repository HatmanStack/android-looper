
> migration@1.0.0 test
> jest

PASS __tests__/unit/store/useUIStore.test.ts (6.37 s)
PASS __tests__/unit/store/migrations.test.ts (6.418 s)
  ● Console

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v1

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v3

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Running migration to v2

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Running migration to v3

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v3

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v3

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.warn
      [Migration] No migration found for v1, skipping

      79 |         }
      80 |       } else {
    > 81 |         console.warn(`[Migration] No migration found for v${version}, skipping`);
         |                 ^
      82 |       }
      83 |     }
      84 |

      at warn (src/store/migrations/migrationSystem.ts:81:17)
      at Object.<anonymous> (__tests__/unit/store/migrations.test.ts:102:35)

    console.warn
      [Migration] No migration found for v2, skipping

      79 |         }
      80 |       } else {
    > 81 |         console.warn(`[Migration] No migration found for v${version}, skipping`);
         |                 ^
      82 |       }
      83 |     }
      84 |

      at warn (src/store/migrations/migrationSystem.ts:81:17)
      at Object.<anonymous> (__tests__/unit/store/migrations.test.ts:102:35)

    console.log
      [Migration] Running migration to v3

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v3

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v1

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.error
      [Migration] State validation failed after migration

      86 |     if (config.validate && !config.validate(currentState)) {
      87 |       const errorMsg = 'State validation failed after migration';
    > 88 |       console.error(`[Migration] ${errorMsg}`);
         |               ^
      89 |       errors.push(errorMsg);
      90 |
      91 |       if (config.defaultState) {

      at error (src/store/migrations/migrationSystem.ts:88:15)
      at Object.<anonymous> (__tests__/unit/store/migrations.test.ts:148:35)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.error
      [Migration] Failed to migrate to v1: Error: Migration failed

      62 |         } catch (error) {
      63 |           const errorMsg = `Failed to migrate to v${version}: ${error}`;
    > 64 |           console.error(`[Migration] ${errorMsg}`);
         |                   ^
      65 |           errors.push(errorMsg);
      66 |
      67 |           // If we have a default state, use it

      at error (src/store/migrations/migrationSystem.ts:64:19)
      at Object.<anonymous> (__tests__/unit/store/migrations.test.ts:173:35)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.error
      [Migration] Failed to migrate to v1: Error: Migration failed

      62 |         } catch (error) {
      63 |           const errorMsg = `Failed to migrate to v${version}: ${error}`;
    > 64 |           console.error(`[Migration] ${errorMsg}`);
         |                   ^
      65 |           errors.push(errorMsg);
      66 |
      67 |           // If we have a default state, use it

      at error (src/store/migrations/migrationSystem.ts:64:19)
      at __tests__/unit/store/migrations.test.ts:197:22
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/unit/store/migrations.test.ts:198:10)

    console.error
      [Migration] Critical migration error: Error: Failed to migrate to v1: Error: Migration failed
          at runMigrations (/home/user/android-looper/Migration/src/store/migrations/migrationSystem.ts:78:17)
          at /home/user/android-looper/Migration/__tests__/unit/store/migrations.test.ts:197:22
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/expect/build/index.js:1824:9)
          at Object.throwingMatcher [as toThrow] (/home/user/android-looper/Migration/node_modules/expect/build/index.js:2235:93)
          at Object.toThrow (/home/user/android-looper/Migration/__tests__/unit/store/migrations.test.ts:198:10)
          at Promise.finally.completed (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/home/user/android-looper/Migration/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:497:12)

      112 |     };
      113 |   } catch (error) {
    > 114 |     console.error('[Migration] Critical migration error:', error);
          |             ^
      115 |
      116 |     // Return default state if available
      117 |     if (config.defaultState) {

      at error (src/store/migrations/migrationSystem.ts:114:13)
      at __tests__/unit/store/migrations.test.ts:197:22
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/unit/store/migrations.test.ts:198:10)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v1

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v2

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Running migration to v2

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.log
      [Migration] Successfully migrated to v2

      at log (src/store/migrations/migrationSystem.ts:104:13)

    console.log
      [Migration] Migrating from v0 to v1

      at log (src/store/migrations/migrationSystem.ts:52:13)

    console.log
      [Migration] Running migration to v1

      at log (src/store/migrations/migrationSystem.ts:59:19)

    console.error
      [Migration] State validation failed after migration

      86 |     if (config.validate && !config.validate(currentState)) {
      87 |       const errorMsg = 'State validation failed after migration';
    > 88 |       console.error(`[Migration] ${errorMsg}`);
         |               ^
      89 |       errors.push(errorMsg);
      90 |
      91 |       if (config.defaultState) {

      at error (src/store/migrations/migrationSystem.ts:88:15)
      at Object.<anonymous> (__tests__/unit/store/migrations.test.ts:320:35)

PASS __tests__/unit/store/useTrackStore.test.ts (6.851 s)
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/unit/store/useTrackStore.test.ts:5:1)

PASS __tests__/unit/services/BaseAudioPlayer.test.ts (6.851 s)
PASS __tests__/unit/store/persistence.test.ts (6.846 s)
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:13:28)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:13:28)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:13:28)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:13:28)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:13:28)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:199:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:220:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at Object.<anonymous> (__tests__/unit/store/persistence.test.ts:238:34)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

PASS __tests__/unit/services/MultiTrackManager.test.ts (6.863 s)
  ● Console

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_3 (total: 3)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Removed track track_1 (remaining: 1)

      at MultiTrackManager.log [as removeTrack] (src/services/audio/MultiTrackManager.ts:56:15)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_3 (total: 3)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Cleared all tracks

      at MultiTrackManager.log [as clearAllTracks] (src/services/audio/MultiTrackManager.ts:72:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Playing all tracks (2)

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:86:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Pausing all tracks (2)

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:104:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Stopping all tracks (2)

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:121:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Setting position to 5000ms on all tracks

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:163:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Track track_2 synced to position 5000ms

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:44:15)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Resyncing tracks (drift: 1000ms) to position 1500ms

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:203:13)

    console.log
      [MultiTrackManager] Setting position to 1500ms on all tracks

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:163:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Playing all tracks (2)

      at MultiTrackManager.log (src/services/audio/MultiTrackManager.ts:86:13)

    console.error
      [MultiTrackManager] Error playing track: Error: Playback failed
          at Object.<anonymous> (/home/user/android-looper/Migration/__tests__/unit/services/MultiTrackManager.test.ts:258:42)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.finally.completed (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/home/user/android-looper/Migration/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:497:12)

      90 |         await player.play();
      91 |       } catch (error) {
    > 92 |         console.error('[MultiTrackManager] Error playing track:', error);
         |                 ^
      93 |         // Continue with other tracks even if one fails
      94 |       }
      95 |     });

      at error (src/services/audio/MultiTrackManager.ts:92:17)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_1 (total: 1)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

    console.log
      [MultiTrackManager] Added track track_2 (total: 2)

      at MultiTrackManager.log [as addTrack] (src/services/audio/MultiTrackManager.ts:25:13)

PASS __tests__/unit/store/usePlaybackStore.test.ts (6.863 s)
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/usePlaybackStore.ts:189:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/usePlaybackStore.ts:189:33)
      at Object.require (__tests__/unit/store/usePlaybackStore.test.ts:5:1)

PASS __tests__/integration/playback.test.ts (7.023 s)
PASS __tests__/unit/services/LifecycleManager.test.ts
  ● Console

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.warn
      [LifecycleManager] Already initialized

      33 |   initialize(options?: { onAudioCleanup?: () => void }) {
      34 |     if (this.subscription) {
    > 35 |       console.warn('[LifecycleManager] Already initialized');
         |               ^
      36 |       return;
      37 |     }
      38 |

      at LifecycleManager.warn [as initialize] (src/services/lifecycle/LifecycleManager.ts:35:15)
      at Object.initialize (__tests__/unit/services/LifecycleManager.test.ts:71:24)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: inactive

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.error
      [LifecycleManager] Error handling background: Error: Pause failed
          at Object.<anonymous> (/home/user/android-looper/Migration/__tests__/unit/services/LifecycleManager.test.ts:127:15)
          at /home/user/android-looper/Migration/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as pauseAll] (/home/user/android-looper/Migration/node_modules/jest-mock/build/index.js:148:19)
          at LifecycleManager.pauseAll [as handleBackground] (/home/user/android-looper/Migration/src/services/lifecycle/LifecycleManager.ts:69:21)
          at handleBackground (/home/user/android-looper/Migration/src/services/lifecycle/LifecycleManager.ts:54:12)
          at stateChangeHandler (/home/user/android-looper/Migration/__tests__/unit/services/LifecycleManager.test.ts:136:20)
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/expect/build/index.js:1824:9)
          at Object.throwingMatcher [as toThrow] (/home/user/android-looper/Migration/node_modules/expect/build/index.js:2235:93)
          at Object.toThrow (/home/user/android-looper/Migration/__tests__/unit/services/LifecycleManager.test.ts:136:58)
          at Promise.finally.completed (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/home/user/android-looper/Migration/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:497:12)

      77 |       console.log('[LifecycleManager] Background handling complete');
      78 |     } catch (error) {
    > 79 |       console.error('[LifecycleManager] Error handling background:', error);
         |               ^
      80 |     }
      81 |   }
      82 |

      at LifecycleManager.error [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:79:15)
      at handleBackground (src/services/lifecycle/LifecycleManager.ts:54:12)
      at stateChangeHandler (__tests__/unit/services/LifecycleManager.test.ts:136:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/unit/services/LifecycleManager.test.ts:136:58)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: active

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App coming to foreground

      at LifecycleManager.log [as handleForeground] (src/services/lifecycle/LifecycleManager.ts:87:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] App state changed to: active

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App coming to foreground

      at LifecycleManager.log [as handleForeground] (src/services/lifecycle/LifecycleManager.ts:87:13)

    console.log
      [LifecycleManager] App state changed to: inactive

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] App state changed to: background

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App going to background

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:64:13)

    console.log
      [LifecycleManager] Background handling complete

      at LifecycleManager.log [as handleBackground] (src/services/lifecycle/LifecycleManager.ts:77:15)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

    console.log
      [LifecycleManager] Initialized

      at LifecycleManager.log [as initialize] (src/services/lifecycle/LifecycleManager.ts:44:13)

    console.log
      [LifecycleManager] App state changed to: active

      at log (src/services/lifecycle/LifecycleManager.ts:51:13)

    console.log
      [LifecycleManager] App coming to foreground

      at LifecycleManager.log [as handleForeground] (src/services/lifecycle/LifecycleManager.ts:87:13)

    console.log
      [LifecycleManager] Cleaned up

      at LifecycleManager.log [as cleanup] (src/services/lifecycle/LifecycleManager.ts:104:13)

PASS __tests__/unit/services/NativeAudioPlayer.test.ts
  ● Console

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Speed set to 1.5x

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:154:15)

    console.log
      [NativeAudioPlayer] Volume set to 75 (scaled: 0.30102999566398125)

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:176:15)

    console.log
      [NativeAudioPlayer] Looping enabled

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:212:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Stopped

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:137:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Paused

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:120:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Stopped

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:137:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Speed set to 1.5x

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:154:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Speed set to 0.05x

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:154:15)

    console.log
      [NativeAudioPlayer] Speed set to 2.5x

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:154:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Volume set to 75 (scaled: 0.30102999566398125)

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:176:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Volume set to 0 (scaled: 0)

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:176:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Looping enabled

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:212:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Looping disabled

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:212:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Looping enabled

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:212:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Speed set to 1.5x

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:154:15)

    console.log
      [NativeAudioPlayer] Stopped

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:137:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Looping enabled

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:212:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Volume set to 50 (scaled: 0.15051499783199074)

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:176:15)

    console.log
      [NativeAudioPlayer] Stopped

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:137:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

    console.log
      [NativeAudioPlayer] Loading audio from file:///test-audio.m4a

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:26:15)

    console.log
      [NativeAudioPlayer] Loaded audio: 120000ms, undefined

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:55:15)

    console.log
      [NativeAudioPlayer] Playback started

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:99:15)

    console.log
      [NativeAudioPlayer] Stopped

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:137:15)

    console.log
      [NativeAudioPlayer] Unloaded

      at NativeAudioPlayer.log (src/services/audio/NativeAudioPlayer.ts:317:15)

PASS __tests__/unit/services/FFmpegCommandBuilder.test.ts
PASS __tests__/unit/services/WebAudioPlayer.test.ts
  ● Console

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:audio1

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:audio2

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Paused at 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:149:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Speed set to 1.5x

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:189:13)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Speed set to 0.05x

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:189:13)

    console.log
      [WebAudioPlayer] Speed set to 2.5x

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:189:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Volume set to 75

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:197:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Volume set to 0

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:197:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Looping enabled

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:229:13)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Looping disabled

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:229:13)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Looping enabled

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:229:13)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Speed set to 1.5x

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:189:13)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Looping enabled

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:229:13)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Volume set to 50

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:197:13)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

    console.log
      [WebAudioPlayer] Loading audio from blob:test-audio

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:41:15)

    console.log
      [WebAudioPlayer] Loaded audio: 120s, 44100Hz

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:48:15)

    console.log
      [WebAudioPlayer] Playback started from 0s

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:118:15)

    console.log
      [WebAudioPlayer] Stopped

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:179:13)

    console.log
      [WebAudioPlayer] Unloaded

      at WebAudioPlayer.log (src/services/audio/WebAudioPlayer.ts:336:13)

PASS __tests__/integration/mixingFlow.test.ts
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/integration/mixingFlow.test.ts:8:1)

    console.log
      [FFmpegService.native] FFmpegService created for native platform

      at FFmpegService.apply [as log] (src/services/ffmpeg/FFmpegService.native.ts:183:18)

FAIL __tests__/integration/importFlow.test.ts
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/integration/importFlow.test.ts:9:1)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/usePlaybackStore.ts:189:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/usePlaybackStore.ts:189:33)
      at Object.require (__tests__/integration/importFlow.test.ts:10:1)

  ● Import Flow Integration › should complete full import flow

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should handle importing multiple files

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should handle import cancellation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should preserve existing tracks when importing

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

FAIL __tests__/unit/services/NativeAudioRecorder.test.ts
  ● Console

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: denied

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: denied

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

    console.log
      [NativeAudioRecorder] Permission status: granted

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:152:15)

  ● NativeAudioRecorder › checkPermission › should request and return permissions

    TypeError: recorder.checkPermission is not a function

      53 |       });
      54 |
    > 55 |       const result = await recorder.checkPermission();
         |                                     ^
      56 |
      57 |       expect(result).toBe(true);
      58 |       expect(Audio.requestPermissionsAsync).toHaveBeenCalled();

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:55:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › checkPermission › should return false if permission denied

    TypeError: recorder.checkPermission is not a function

      65 |       });
      66 |
    > 67 |       const result = await recorder.checkPermission();
         |                                     ^
      68 |
      69 |       expect(result).toBe(false);
      70 |     });

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:67:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › checkPermission › should throw AudioError on permission check failure

    TypeError: recorder.checkPermission is not a function

      73 |       (Audio.requestPermissionsAsync as jest.Mock).mockRejectedValue(new Error('Permission error'));
      74 |
    > 75 |       await expect(recorder.checkPermission()).rejects.toThrow(AudioError);
         |                             ^
      76 |       await expect(recorder.checkPermission()).rejects.toThrow(
      77 |         'Failed to check recording permissions'
      78 |       );

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:75:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › startRecording › should start recording with permissions

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › startRecording › should throw if permissions denied

    expect(received).rejects.toThrow(expected)

    Expected substring: "Recording permission denied"
    Received message:   "Microphone permission denied"

          68 |       const hasPermission = await this.getPermissions();
          69 |       if (!hasPermission) {
        > 70 |         throw new AudioError(
             |               ^
          71 |           AudioErrorCode.PERMISSION_DENIED,
          72 |           'Microphone permission denied',
          73 |           undefined,

      at NativeAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:70:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/NativeAudioRecorder.test.ts:107:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › startRecording › should throw if already recording

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should stop recording and return URI

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should throw if not recording

    expect(received).rejects.toThrow(expected)

    Expected substring: "No active recording"
    Received message:   "Cannot stop recording: not recording"

          110 |   public async stopRecording(): Promise<string> {
          111 |     if (!this._isRecording) {
        > 112 |       throw new AudioError(
              |             ^
          113 |         AudioErrorCode.RECORDING_FAILED,
          114 |         'Cannot stop recording: not recording',
          115 |         'No recording in progress'

      at NativeAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:112:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as stopRecording] (src/services/audio/BaseAudioRecorder.ts:110:29)
      at Object.stopRecording (__tests__/unit/services/NativeAudioRecorder.test.ts:134:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/NativeAudioRecorder.test.ts:134:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should throw if stop fails

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › getDuration › should return recording duration

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › getDuration › should return 0 if no recording

    TypeError: recorder.getDuration is not a function

      163 |
      164 |     it('should return 0 if no recording', async () => {
    > 165 |       const duration = await recorder.getDuration();
          |                                       ^
      166 |       expect(duration).toBe(0);
      167 |     });
      168 |   });

      at Object.getDuration (__tests__/unit/services/NativeAudioRecorder.test.ts:165:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › cleanup › should cleanup recording instance

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL __tests__/integration/recordingFlow.test.ts
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/integration/recordingFlow.test.ts:9:1)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/usePlaybackStore.ts:189:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/usePlaybackStore.ts:189:33)
      at Object.require (__tests__/integration/recordingFlow.test.ts:10:1)

  ● Recording Flow Integration › should complete full recording flow

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle recording cancellation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle multiple recordings sequentially

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle recording errors gracefully

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should prevent simultaneous recordings

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

FAIL __tests__/platform/platformVerification.test.ts (7.761 s)
  ● Console

    console.log
      Running on platform: ios

      at Object.log (__tests__/platform/platformVerification.test.ts:18:13)

    console.log
      File importer initialized for ios

      at Object.log (__tests__/platform/platformVerification.test.ts:64:15)

    console.log
      [FFmpegService.native] FFmpegService created for native platform

      at FFmpegService.apply [as log] (src/services/ffmpeg/FFmpegService.native.ts:183:18)

    console.log
      FFmpeg service initialized for ios

      at Object.log (__tests__/platform/platformVerification.test.ts:86:15)

    console.log
      Skipping Web API checks on native platform

      at Object.log (__tests__/platform/platformVerification.test.ts:114:15)

    console.log
      ✓ expo-av available

      at Object.log (__tests__/platform/platformVerification.test.ts:123:15)

    console.log
      Screen dimensions: 750x1334

      at Object.log (__tests__/platform/platformVerification.test.ts:138:13)

    console.log
      Platform URI format: file:///var/mobile/Containers/Data/Application/test.mp3

      at Object.log (__tests__/platform/platformVerification.test.ts:154:13)

    console.log
      Supported formats: audio/mp4, audio/mp3, audio/wav, audio/aac

      at Object.log (__tests__/platform/platformVerification.test.ts:169:13)

    console.log
      Platform info: {
        platform: 'ios',
        version: undefined,
        isTV: false,
        isTesting: undefined
      }

      at Object.log (__tests__/platform/platformVerification.test.ts:199:13)

    console.log
      Expected audio latency: 10-30ms

      at Object.log (__tests__/platform/platformVerification.test.ts:212:13)

    console.log
      Platform.select returned: ios-value

      at Object.log (__tests__/platform/platformVerification.test.ts:230:13)

    console.log
      Audio configuration: { sampleRate: 44100, channels: 2, audioQuality: 'high' }

      at Object.log (__tests__/platform/platformVerification.test.ts:271:13)

    console.log
      Storage path: Documents

      at Object.log (__tests__/platform/platformVerification.test.ts:283:13)

  ● Platform Verification › should provide platform version information

    expect(received).toBeDefined()

    Received: undefined

      23 |       expect(Platform.Version).toBeUndefined(); // Web doesn't have version
      24 |     } else {
    > 25 |       expect(Platform.Version).toBeDefined();
         |                                ^
      26 |       console.log(`Platform version: ${Platform.Version}`);
      27 |     }
      28 |   });

      at Object.toBeDefined (__tests__/platform/platformVerification.test.ts:25:32)

  ● Platform-Specific Services › Audio Service › should provide correct audio service for platform

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:34:43)

  ● Platform-Specific Services › Audio Service › should have platform-specific implementation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:47:43)

  ● Platform-Specific Services › File Importer › should have platform-specific implementation

    expect(received).toContain(expected) // indexOf

    Expected substring: "Native"
    Received string:    "Function"

      71 |         expect(fileImporter.constructor.name).toContain('Web');
      72 |       } else {
    > 73 |         expect(fileImporter.constructor.name).toContain('Native');
         |                                               ^
      74 |       }
      75 |     });
      76 |   });

      at Object.toContain (__tests__/platform/platformVerification.test.ts:73:47)

  ● Platform-Specific Services › FFmpeg Service › should have platform-specific configuration

    expect(received).toContain(expected) // indexOf

    Expected substring: "Native"
    Received string:    "FFmpegService"

       95 |       } else {
       96 |         // Native uses FFmpeg Kit
    >  97 |         expect(ffmpegService.constructor.name).toContain('Native');
          |                                                ^
       98 |       }
       99 |     });
      100 |   });

      at Object.toContain (__tests__/platform/platformVerification.test.ts:97:48)

  ● Error Handling › should handle platform-specific errors

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:176:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL __tests__/unit/services/WebAudioRecorder.test.ts
  ● Console

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.error
      [WebAudioRecorder] Permission check error: Error: Permission denied
          at Object.<anonymous> (/home/user/android-looper/Migration/__tests__/unit/services/WebAudioRecorder.test.ts:81:9)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.finally.completed (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/home/user/android-looper/Migration/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:497:12)

      220 |
      221 |       // Other errors (no microphone, etc.)
    > 222 |       console.error('[WebAudioRecorder] Permission check error:', error);
          |               ^
      223 |       return false;
      224 |     }
      225 |   }

      at WebAudioRecorder.error (src/services/audio/WebAudioRecorder.ts:222:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.error
      [WebAudioRecorder] Permission check error: Error: Permission denied
          at Object.<anonymous> (/home/user/android-looper/Migration/__tests__/unit/services/WebAudioRecorder.test.ts:81:9)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at /home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
          at new Promise (<anonymous>)
          at Object.<anonymous> (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
          at Promise.finally.completed (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
          at _callCircusTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
          at /home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
          at run (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (/home/user/android-looper/Migration/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
          at jestAdapter (/home/user/android-looper/Migration/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/home/user/android-looper/Migration/node_modules/jest-runner/build/testWorker.js:497:12)

      220 |
      221 |       // Other errors (no microphone, etc.)
    > 222 |       console.error('[WebAudioRecorder] Permission check error:', error);
          |               ^
      223 |       return false;
      224 |     }
      225 |   }

      at WebAudioRecorder.error (src/services/audio/WebAudioRecorder.ts:222:15)
          at Generator.throw (<anonymous>)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Recording started with MIME type: audio/webm

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:65:15)

    console.log
      [WebAudioRecorder] Cancelling recording

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:167:13)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Recording started with MIME type:

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:65:15)

    console.log
      [WebAudioRecorder] Recording stopped. Blob size: 0 bytes, URL: blob:http://localhost/test

      at Object.log [as onstop] (src/services/audio/WebAudioRecorder.ts:133:19)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Recording started with MIME type:

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:65:15)

    console.log
      [WebAudioRecorder] Recording stopped. Blob size: 0 bytes, URL: blob:http://localhost/test

      at Object.log [as onstop] (src/services/audio/WebAudioRecorder.ts:133:19)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Recording started with MIME type:

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:65:15)

    console.log
      [WebAudioRecorder] Cancelling recording

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:167:13)

    console.log
      [WebAudioRecorder] Stopped track: undefined

      at log (src/services/audio/WebAudioRecorder.ts:293:17)
          at Array.forEach (<anonymous>)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

    console.log
      [WebAudioRecorder] Cleaning up resources

      at WebAudioRecorder.log (src/services/audio/WebAudioRecorder.ts:231:13)

  ● WebAudioRecorder › checkPermission › should check media device permissions

    TypeError: recorder.checkPermission is not a function

      45 |     it('should check media device permissions', async () => {
      46 |       recorder = new WebAudioRecorder();
    > 47 |       const hasPermission = await recorder.checkPermission();
         |                                            ^
      48 |
      49 |       expect(hasPermission).toBe(true);
      50 |       expect(navigator.mediaDevices.getUserMedia).toHaveBeenCalledWith({

      at Object.checkPermission (__tests__/unit/services/WebAudioRecorder.test.ts:47:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebAudioRecorder › checkPermission › should return false if permission denied

    TypeError: recorder.checkPermission is not a function

      59 |
      60 |       recorder = new WebAudioRecorder();
    > 61 |       const hasPermission = await recorder.checkPermission();
         |                                            ^
      62 |
      63 |       expect(hasPermission).toBe(false);
      64 |     });

      at Object.checkPermission (__tests__/unit/services/WebAudioRecorder.test.ts:61:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebAudioRecorder › startRecording › should start recording with permissions

    AudioError: Failed to start recording: MediaRecorder.isTypeSupported is not a function

      89 |       }
      90 |
    > 91 |       throw new AudioError(
         |             ^
      92 |         AudioErrorCode.RECORDING_FAILED,
      93 |         `Failed to start recording: ${(error as Error).message}`,
      94 |         'Failed to start recording. Please check your microphone and try again.'

      at WebAudioRecorder.<anonymous> (src/services/audio/WebAudioRecorder.ts:91:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › startRecording › should throw if already recording

    AudioError: Failed to start recording: MediaRecorder.isTypeSupported is not a function

      89 |       }
      90 |
    > 91 |       throw new AudioError(
         |             ^
      92 |         AudioErrorCode.RECORDING_FAILED,
      93 |         `Failed to start recording: ${(error as Error).message}`,
      94 |         'Failed to start recording. Please check your microphone and try again.'

      at WebAudioRecorder.<anonymous> (src/services/audio/WebAudioRecorder.ts:91:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › startRecording › should use supported mime type

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"getTracks": [Function mockConstructor]},
    - ObjectContaining {"mimeType": StringContaining "mp4"},
    + {"audioBitsPerSecond": 128000, "mimeType": "audio/webm"},

    Number of calls: 1

      108 |       await recorder.startRecording();
      109 |
    > 110 |       expect(MediaRecorder).toHaveBeenCalledWith(
          |                             ^
      111 |         mockStream,
      112 |         expect.objectContaining({
      113 |           mimeType: expect.stringContaining('mp4'),

      at Object.toHaveBeenCalledWith (__tests__/unit/services/WebAudioRecorder.test.ts:110:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › stopRecording › should stop recording and return blob URL

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      141 |       const uri = await stopPromise;
      142 |
    > 143 |       expect(mockMediaRecorder.stop).toHaveBeenCalled();
          |                                      ^
      144 |       expect(uri).toBe('blob:http://localhost/test');
      145 |     });
      146 |

      at Object.toHaveBeenCalled (__tests__/unit/services/WebAudioRecorder.test.ts:143:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › stopRecording › should throw if not recording

    expect(received).rejects.toThrow(expected)

    Expected substring: "No active recording"
    Received message:   "Cannot stop recording: not recording"

          110 |   public async stopRecording(): Promise<string> {
          111 |     if (!this._isRecording) {
        > 112 |       throw new AudioError(
              |             ^
          113 |         AudioErrorCode.RECORDING_FAILED,
          114 |         'Cannot stop recording: not recording',
          115 |         'No recording in progress'

      at WebAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:112:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at WebAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at WebAudioRecorder.apply [as stopRecording] (src/services/audio/BaseAudioRecorder.ts:110:29)
      at Object.stopRecording (__tests__/unit/services/WebAudioRecorder.test.ts:151:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/WebAudioRecorder.test.ts:151:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › getDuration › should return 0 for web (duration not tracked)

    TypeError: recorder.getDuration is not a function

      171 |     it('should return 0 for web (duration not tracked)', async () => {
      172 |       recorder = new WebAudioRecorder();
    > 173 |       const duration = await recorder.getDuration();
          |                                       ^
      174 |
      175 |       expect(duration).toBe(0);
      176 |     });

      at Object.getDuration (__tests__/unit/services/WebAudioRecorder.test.ts:173:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL __tests__/unit/services/FileImporter.test.ts
  ● NativeFileImporter › pickAudioFile › should return selected audio file

    TypeError: importer.pickAudioFile is not a function

      31 |       });
      32 |
    > 33 |       const result = await importer.pickAudioFile();
         |                                     ^
      34 |
      35 |       expect(result).toEqual({
      36 |         uri: 'file://test-audio.mp3',

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:33:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should throw if user cancelled

    TypeError: importer.pickAudioFile is not a function

      46 |       });
      47 |
    > 48 |       await expect(importer.pickAudioFile()).rejects.toThrow(AudioError);
         |                             ^
      49 |       await expect(importer.pickAudioFile()).rejects.toThrow('File selection cancelled');
      50 |     });
      51 |

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:48:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should throw on picker error

    TypeError: importer.pickAudioFile is not a function

      53 |       (DocumentPicker.getDocumentAsync as jest.Mock).mockRejectedValue(new Error('Picker error'));
      54 |
    > 55 |       await expect(importer.pickAudioFile()).rejects.toThrow(AudioError);
         |                             ^
      56 |       await expect(importer.pickAudioFile()).rejects.toThrow('Failed to open file picker');
      57 |     });
      58 |

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:55:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should use correct mime types for audio files

    TypeError: importer.pickAudioFile is not a function

      58 |
      59 |     it('should use correct mime types for audio files', async () => {
    > 60 |       await importer.pickAudioFile();
         |                      ^
      61 |
      62 |       expect(DocumentPicker.getDocumentAsync).toHaveBeenCalledWith({
      63 |         type: ['audio/*', 'audio/mpeg', 'audio/mp4', 'audio/wav', 'audio/webm'],

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:60:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebFileImporter › pickAudioFile › should return selected file with blob URL

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should throw if no file selected

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should create input with audio accept types

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should trigger click on input

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

FAIL __tests__/performance/stores.perf.test.ts (7.922 s)
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/performance/stores.perf.test.ts:7:1)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/usePlaybackStore.ts:189:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/usePlaybackStore.ts:189:33)
      at Object.require (__tests__/performance/stores.perf.test.ts:8:1)

    console.log
      ✓ Performance check passed: Add track took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Add 100 tracks took 3ms (target: 500ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Update track took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Delete track took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Get track from 1000 tracks took 1ms (target: 5ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Average update (100 updates) took 0.02ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Add track state took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Add 100 track states took 21ms (target: 500ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Pause all 20 tracks took 0ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Show modal took 0ms (target: 5ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Update mixing progress took 0ms (target: 5ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Average progress update (100 updates) took 0.0297029702970297ms (target: 5ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Notify subscribers took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Notify 10 subscribers took 0ms (target: 20ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Select 1000 tracks took 0ms (target: 5ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Filter playing tracks took 0ms (target: 10ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      Rapid track additions stats: {
        name: 'Add track',
        iterations: 100,
        avg: 0.23,
        min: 0,
        max: 13,
        p95: 1
      }

      at Object.log (__tests__/performance/stores.perf.test.ts:352:13)

    console.log
      Rapid state updates stats: {
        name: 'Update track',
        iterations: 100,
        avg: 0.15,
        min: 0,
        max: 1,
        p95: 1
      }

      at Object.log (__tests__/performance/stores.perf.test.ts:372:13)

  ● Performance - PlaybackStore › should update track state quickly

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).updateTrackState is not a function

      146 |
      147 |     const { duration } = await measureDuration(async () => {
    > 148 |       usePlaybackStore.getState().updateTrackState('track-1', { volume: 50 });
          |                                   ^
      149 |     });
      150 |
      151 |     const benchmark = assertPerformance('Update track state', duration, 10);

      at updateTrackState (__tests__/performance/stores.perf.test.ts:148:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at fn (src/test-utils/performanceUtils.ts:28:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test-utils/performanceUtils.ts:24:38)
      at Object.<anonymous> (__tests__/performance/stores.perf.test.ts:147:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance - PlaybackStore › should start playing track quickly

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).setPlaying is not a function

      178 |
      179 |     const { duration } = await measureDuration(async () => {
    > 180 |       usePlaybackStore.getState().setPlaying('track-1', true);
          |                                   ^
      181 |     });
      182 |
      183 |     const benchmark = assertPerformance('Set track playing', duration, 10);

      at setPlaying (__tests__/performance/stores.perf.test.ts:180:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at fn (src/test-utils/performanceUtils.ts:28:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test-utils/performanceUtils.ts:24:38)
      at Object.<anonymous> (__tests__/performance/stores.perf.test.ts:179:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL e2e/web/import.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/import.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 | import path from 'path';
       9 |
      10 | test.describe('Import Flow', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/import.spec.ts:7:1)

FAIL __tests__/unit/utils/permissions.test.ts
  ● Console

    console.error
      [Permissions] Microphone permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:37:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      39 |     };
      40 |   } catch (error) {
    > 41 |     console.error('[Permissions] Microphone permission error:', error);
         |             ^
      42 |     return {
      43 |       status: PermissionStatus.DENIED,
      44 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:41:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Microphone permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:37:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      39 |     };
      40 |   } catch (error) {
    > 41 |     console.error('[Permissions] Microphone permission error:', error);
         |             ^
      42 |     return {
      43 |       status: PermissionStatus.DENIED,
      44 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:41:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Microphone permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:37:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      39 |     };
      40 |   } catch (error) {
    > 41 |     console.error('[Permissions] Microphone permission error:', error);
         |             ^
      42 |     return {
      43 |       status: PermissionStatus.DENIED,
      44 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:41:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Microphone permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:37:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      39 |     };
      40 |   } catch (error) {
    > 41 |     console.error('[Permissions] Microphone permission error:', error);
         |             ^
      42 |     return {
      43 |       status: PermissionStatus.DENIED,
      44 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:41:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Storage permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:57:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      59 |     };
      60 |   } catch (error) {
    > 61 |     console.error('[Permissions] Storage permission error:', error);
         |             ^
      62 |     return {
      63 |       status: PermissionStatus.DENIED,
      64 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:61:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Storage permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:57:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      59 |     };
      60 |   } catch (error) {
    > 61 |     console.error('[Permissions] Storage permission error:', error);
         |             ^
      62 |     return {
      63 |       status: PermissionStatus.DENIED,
      64 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:61:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Storage permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:57:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      59 |     };
      60 |   } catch (error) {
    > 61 |     console.error('[Permissions] Storage permission error:', error);
         |             ^
      62 |     return {
      63 |       status: PermissionStatus.DENIED,
      64 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:61:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Microphone permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:37:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      39 |     };
      40 |   } catch (error) {
    > 41 |     console.error('[Permissions] Microphone permission error:', error);
         |             ^
      42 |     return {
      43 |       status: PermissionStatus.DENIED,
      44 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:41:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.error
      [Permissions] Storage permission error: TypeError: Cannot read properties of undefined (reading 'GRANTED')
          at GRANTED (/home/user/android-looper/Migration/src/utils/permissions.native.ts:19:31)
          at convertPermissionStatus (/home/user/android-looper/Migration/src/utils/permissions.native.ts:57:15)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      59 |     };
      60 |   } catch (error) {
    > 61 |     console.error('[Permissions] Storage permission error:', error);
         |             ^
      62 |     return {
      63 |       status: PermissionStatus.DENIED,
      64 |       canAskAgain: false,

      at error (src/utils/permissions.native.ts:61:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › iOS/Web › should return true on iOS (handled by expo-av)

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should request Android permission and return true if granted

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should return false if permission denied

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should return false if never ask again

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › iOS/Web › should return true on iOS (handled by system)

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › Android › should request storage permission on Android

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › Android › should return false if storage permission denied

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › Web platform › should return true for microphone on web

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › Web platform › should return true for storage on web

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS __tests__/unit/services/AudioError.test.ts
FAIL e2e/web/mixing.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/mixing.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 |
       9 | test.describe('Mixing Flow', () => {
      10 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/mixing.spec.ts:7:1)

FAIL e2e/web/playback.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/playback.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 |
       9 | test.describe('Playback Flow', () => {
      10 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/playback.spec.ts:7:1)

FAIL e2e/web/recording.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/recording.spec.ts'

       6 |  */
       7 |
    >  8 | import { test, expect } from '@playwright/test';
         | ^
       9 |
      10 | test.describe('Recording Flow', () => {
      11 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/recording.spec.ts:8:1)

PASS __tests__/unit/services/AudioServiceFactory.test.ts
  ● Console

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Cleaning up AudioService

      at AudioServiceFactoryClass.log (src/services/audio/AudioServiceFactory.ts:212:15)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Cleaning up AudioService

      at AudioServiceFactoryClass.log (src/services/audio/AudioServiceFactory.ts:212:15)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Cleaning up AudioService

      at AudioServiceFactoryClass.log (src/services/audio/AudioServiceFactory.ts:212:15)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Cleaning up AudioService

      at AudioServiceFactoryClass.log (src/services/audio/AudioServiceFactory.ts:212:15)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

    console.log
      [AudioServiceFactory] Cleaning up AudioService

      at AudioServiceFactoryClass.log (src/services/audio/AudioServiceFactory.ts:212:15)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [AudioServiceFactory] Created AudioService for iOS

      at AudioServiceFactoryClass.log [as createAudioService] (src/services/audio/AudioServiceFactory.ts:162:15)

FAIL __tests__/load/loadTests.test.ts (8.544 s)
  ● Console

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/useTrackStore.ts:83:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/useTrackStore.ts:83:33)
      at Object.require (__tests__/load/loadTests.test.ts:7:1)

    console.warn
      [Storage] AsyncStorage not available, using in-memory storage

      76 |   } catch (error) {
      77 |     // AsyncStorage not available - use in-memory storage as fallback
    > 78 |     console.warn('[Storage] AsyncStorage not available, using in-memory storage');
         |             ^
      79 |
      80 |     const memoryStorage: Record<string, string> = {};
      81 |

      at warn (src/store/storage.ts:78:13)
      at src/store/usePlaybackStore.ts:189:53
      at createJSONStorage (node_modules/zustand/middleware.js:280:15)
      at Object.<anonymous> (src/store/usePlaybackStore.ts:189:33)
      at Object.require (__tests__/load/loadTests.test.ts:8:1)

    console.log
      Loaded 10 tracks in 1ms

      at Object.log (__tests__/load/loadTests.test.ts:56:13)

    console.log
      Loaded 20 tracks in 1ms

      at Object.log (__tests__/load/loadTests.test.ts:80:13)

    console.log
      Loaded 50 tracks in 4ms

      at Object.log (__tests__/load/loadTests.test.ts:104:13)

    console.log
      Loaded 100 tracks in 4ms

      at Object.log (__tests__/load/loadTests.test.ts:121:13)

    console.log
      1000 rapid additions: 643ms (avg: 0.643ms)

      at Object.log (__tests__/load/loadTests.test.ts:146:13)

    console.log
      1000 rapid deletions: 450ms (avg: 0.45ms)

      at Object.log (__tests__/load/loadTests.test.ts:168:13)

    console.log
      1000 rapid updates: 5ms (avg: 0.005ms)

      at Object.log (__tests__/load/loadTests.test.ts:191:13)

    console.log
      20 tracks: 0ms (vs 10 tracks: 1ms, ratio: 0.00)

      at Object.log (__tests__/load/loadTests.test.ts:333:15)

    console.log
      1 tracks: avg update 0.01ms (ratio: 1.00)

      at Object.log (__tests__/load/loadTests.test.ts:369:15)

    console.log
      10 tracks: avg update 0.01ms (ratio: 1.00)

      at Object.log (__tests__/load/loadTests.test.ts:369:15)

    console.log
      50 tracks: avg update 0.04ms (ratio: 4.00)

      at Object.log (__tests__/load/loadTests.test.ts:369:15)

    console.log
      50 concurrent additions: 1ms

      at Object.log (__tests__/load/loadTests.test.ts:405:13)

    console.log
      100 mixed concurrent operations completed

      at Object.log (__tests__/load/loadTests.test.ts:450:13)

  ● Stress Tests - Rapid Operations › should handle rapid playback state changes

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).setPlaying is not a function

      206 |
      207 |     for (let i = 0; i < operations; i++) {
    > 208 |       usePlaybackStore.getState().setPlaying(track.id, i % 2 === 0);
          |                                   ^
      209 |     }
      210 |
      211 |     const endTime = performance.now();

      at Object.setPlaying (__tests__/load/loadTests.test.ts:208:35)

  ● Performance Degradation Tests › should maintain performance with increasing track count

    expect(received).toBeLessThan(expected)

    Expected: < 3.75
    Received:   Infinity

      329 |       // Time should scale roughly linearly (not exponentially)
      330 |       // Allow 50% overhead for overhead
    > 331 |       expect(timeRatio).toBeLessThan(countRatio * 1.5);
          |                         ^
      332 |
      333 |       console.log(
      334 |         `${curr.count} tracks: ${curr.time}ms (vs ${prev.count} tracks: ${prev.time}ms, ratio: ${timeRatio.toFixed(2)})`

      at Object.toBeLessThan (__tests__/load/loadTests.test.ts:331:25)

  ● Performance Degradation Tests › should maintain update performance regardless of track count

    expect(received).toBeLessThan(expected)

    Expected: < 2
    Received:   4

      372 |
      373 |       // Update time shouldn't grow more than 2x
    > 374 |       expect(ratio).toBeLessThan(2.0);
          |                     ^
      375 |     }
      376 |   });
      377 | });

      at Object.toBeLessThan (__tests__/load/loadTests.test.ts:374:21)

PASS __tests__/setup.test.ts
FAIL __tests__/unit/hooks/useAppLifecycle.test.ts
  ● useAppLifecycle › should call onBackground when app goes to background

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      58 |     callback('background');
      59 |
    > 60 |     expect(onBackground).toHaveBeenCalledTimes(1);
         |                          ^
      61 |     expect(onActive).not.toHaveBeenCalled();
      62 |   });
      63 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:60:26)

  ● useBackgroundHandler › should call onBackground when app goes to background

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      150 |     callback('background');
      151 |
    > 152 |     expect(onBackground).toHaveBeenCalledTimes(1);
          |                          ^
      153 |     expect(onForeground).not.toHaveBeenCalled();
      154 |   });
      155 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:152:26)

  ● useBackgroundHandler › should work without onForeground callback

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      180 |     }).not.toThrow();
      181 |
    > 182 |     expect(onBackground).toHaveBeenCalledTimes(1);
          |                          ^
      183 |   });
      184 | });
      185 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:182:26)

PASS __tests__/unit/components/VolumeSlider.test.tsx
PASS __tests__/unit/components/Slider.test.tsx
PASS __tests__/unit/components/SpeedSlider.test.tsx
PASS __tests__/unit/services/MockAudioServices.test.ts (14.752 s)
  ● Console

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Stopping recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:39:13)

    console.log
      [MockAudioRecorder] Recording saved to: mock://audio/recording-1762705360657.m4a

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:54:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Stopping recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:39:13)

    console.log
      [MockAudioRecorder] Recording saved to: mock://audio/recording-1762705361755.m4a

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:54:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 241306.9490238994ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 240453.46393078513ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 194768.98873800103ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Pausing playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:48:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 230413.01306895312ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 196757.81829370855ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting speed to: 1.5

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:69:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 122024.8092048046ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 268789.41801899613ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting volume to: 50

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:82:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 174679.27043651522ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 142673.24374662878ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting looping to: false

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:89:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 130585.22815515053ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 268410.4653926549ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 280427.067223225ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Seeking to: 1000

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:110:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 215243.45445210818ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 180246.79936624842ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/test.mp3 undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/test.mp3, duration: 172222.1713962797ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioMixer] Starting to mix 2 tracks

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:24:13)

    console.log
      [MockAudioMixer] Output path: output.mp3

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:25:13)

    console.log
      [MockAudioMixer] Options: undefined

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:26:13)

    console.log
      [MockAudioMixer] Estimated duration: 1000ms

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:37:13)

    console.log
      [MockAudioMixer] Mixing complete: mock://audio/mixed-1762705365374.mp3

      at Timeout.log (src/services/audio/mock/MockAudioMixer.ts:68:19)

    console.log
      [MockAudioMixer] Starting to mix 1 tracks

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:24:13)

    console.log
      [MockAudioMixer] Output path: output.mp3

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:25:13)

    console.log
      [MockAudioMixer] Options: undefined

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:26:13)

    console.log
      [MockAudioMixer] Estimated duration: 500ms

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:37:13)

    console.log
      [MockAudioMixer] Mixing complete: mock://audio/mixed-1762705365880.mp3

      at Timeout.log (src/services/audio/mock/MockAudioMixer.ts:68:19)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Deleting file: mock://audio/test.mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:71:13)

    console.log
      [MockFileManager] File deleted: mock://audio/test.mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:78:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: file1 mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/file1.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Saving audio file: file2 wav

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/file2.wav (5000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Listing audio files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:182:13)

    console.log
      [MockFileManager] Found 7 audio files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:190:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Copying to app storage: mock://external/source.mp3 -> copied

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:86:13)

    console.log
      [MockFileManager] File copied: mock://audio/copied.mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:113:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: test mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/test.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Exporting to external storage: mock://audio/test.mp3 -> exported

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:121:13)

    console.log
      [MockFileManager] File exported: mock://external/exported.mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:128:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Saving audio file: temp-file mp3

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:46:13)

    console.log
      [MockFileManager] File saved: mock://audio/temp-file.mp3 (2000000 bytes)

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:63:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 2 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

PASS __tests__/unit/services/AudioService.test.ts (17.863 s)
  ● Console

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Stopping recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:39:13)

    console.log
      [MockAudioRecorder] Recording saved to: mock://audio/recording-1762705360493.m4a

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:54:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioRecorder] Stopping recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:39:13)

    console.log
      [MockAudioRecorder] Recording saved to: mock://audio/recording-1762705362000.m4a

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:54:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Pausing playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:48:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting speed to: 1.5

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:69:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting volume to: 50

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:82:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Setting looping to: false

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:89:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Seeking to: 1000

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:110:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Stopping playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:58:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Starting playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:38:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Pausing playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:48:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Pausing playback

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:48:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioMixer] Starting to mix 2 tracks

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:24:13)

    console.log
      [MockAudioMixer] Output path: output.mp3

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:25:13)

    console.log
      [MockAudioMixer] Options: undefined

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:26:13)

    console.log
      [MockAudioMixer] Estimated duration: 1000ms

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:37:13)

    console.log
      [MockAudioMixer] Mixing complete: mock://audio/mixed-1762705367501.mp3

      at Timeout.log (src/services/audio/mock/MockAudioMixer.ts:68:19)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioMixer] Starting to mix 1 tracks

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:24:13)

    console.log
      [MockAudioMixer] Output path: output.mp3

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:25:13)

    console.log
      [MockAudioMixer] Options: {}

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:26:13)

    console.log
      [MockAudioMixer] Estimated duration: 500ms

      at MockAudioMixer.log (src/services/audio/mock/MockAudioMixer.ts:37:13)

    console.log
      [MockAudioMixer] Mixing complete: mock://audio/mixed-1762705368107.mp3

      at Timeout.log (src/services/audio/mock/MockAudioMixer.ts:68:19)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Copying to app storage: mock://audio/recording-1.m4a -> dest

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:86:13)

    console.log
      [MockFileManager] File copied: mock://audio/dest.m4a

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:113:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Exporting to external storage: mock://audio/recording-1.m4a -> export

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:121:13)

    console.log
      [MockFileManager] File exported: mock://external/export.m4a

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:128:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)

    console.log
      [MockFileManager] Deleting file: mock://audio/recording-1.m4a

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:71:13)

    console.log
      [MockFileManager] File deleted: mock://audio/recording-1.m4a

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:78:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Listing audio files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:182:13)

    console.log
      [MockFileManager] Found 5 audio files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:190:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 0 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Initialized with 6 mock files

      at MockFileManager.log [as initializeMockFiles] (src/services/audio/mock/MockFileManager.ts:39:13)

    console.log
      [MockAudioRecorder] Checking permissions

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:77:13)

    console.log
      [MockAudioRecorder] Starting recording with options: undefined

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:20:13)

    console.log
      [MockAudioPlayer] Loading audio: mock://audio/recording-1.m4a undefined

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:21:13)

    console.log
      [MockAudioPlayer] Loaded mock://audio/recording-1.m4a, duration: 120000ms

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:31:13)

    console.log
      [MockAudioRecorder] Cancelling recording

      at MockAudioRecorder.log (src/services/audio/mock/MockAudioRecorder.ts:62:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 1 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockFileManager] Cleaned up 0 temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)

PASS __tests__/unit/components/ActionButton.test.tsx (11.953 s)
PASS __tests__/unit/components/TrackListItem.test.tsx (12.591 s)
  ● Console

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Pause track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:41:13)

    console.log
      Delete track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:46:13)

PASS __tests__/unit/components/TrackList.test.tsx (14.021 s)
PASS __tests__/unit/components/SaveModal.test.tsx (14.403 s)
FAIL __tests__/accessibility/components.a11y.test.tsx (22.378 s)
  ● Accessibility - VolumeSlider › should have adjustable role

    Unable to find an element with role: adjustable

    [36m<RNCSafeAreaProvider>[39m
      [36m<View[39m
        [33mpointerEvents[39m=[32m"box-none"[39m
      [36m>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mVolume: [0m
            [0m75[0m
          [36m</Text>[39m
          [36m<View>[39m
            [36m<RNCSlider[39m
              [33maccessibilityHint[39m=[32m"Adjust track volume from 0 to 100 percent"[39m
              [33maccessibilityLabel[39m=[32m"Volume"[39m
              [33maccessibilityRole[39m=[32m"adjustable"[39m
              [33maccessibilityState[39m=[32m{
                {
                  "disabled": false,
                }
              }[39m
              [33maccessibilityValue[39m=[32m{
                {
                  "text": "75 percent",
                }
              }[39m
              [33mtestID[39m=[32m"slider"[39m
              [33mvalue[39m=[32m{75}[39m
            [36m/>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</RNCSafeAreaProvider>[39m

       99 |     });
      100 |
    > 101 |     expect(getByRole('adjustable')).toBeDefined();
          |            ^
      102 |   });
      103 |
      104 |   it('should have accessibility hint', () => {

      at Object.getByRole (__tests__/accessibility/components.a11y.test.tsx:101:12)

  ● Accessibility - SpeedSlider › should have adjustable role

    Unable to find an element with role: adjustable

    [36m<RNCSafeAreaProvider>[39m
      [36m<View[39m
        [33mpointerEvents[39m=[32m"box-none"[39m
      [36m>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mSpeed: [0m
            [0m1.00[0m
            [0mx[0m
          [36m</Text>[39m
          [36m<View>[39m
            [36m<RNCSlider[39m
              [33maccessibilityHint[39m=[32m"Adjust playback speed from 0.05 to 2.50 times"[39m
              [33maccessibilityLabel[39m=[32m"Playback speed"[39m
              [33maccessibilityRole[39m=[32m"adjustable"[39m
              [33maccessibilityState[39m=[32m{
                {
                  "disabled": false,
                }
              }[39m
              [33maccessibilityValue[39m=[32m{
                {
                  "text": "1.00 times",
                }
              }[39m
              [33mtestID[39m=[32m"slider"[39m
              [33mvalue[39m=[32m{41}[39m
            [36m/>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</RNCSafeAreaProvider>[39m

      135 |     });
      136 |
    > 137 |     expect(getByRole('adjustable')).toBeDefined();
          |            ^
      138 |   });
      139 |
      140 |   it('should announce max speed correctly', () => {

      at Object.getByRole (__tests__/accessibility/components.a11y.test.tsx:137:12)

  ● Accessibility - TrackListItem › should announce playing state

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 4

      Object {
    +   "busy": undefined,
    +   "checked": undefined,
    +   "disabled": false,
    +   "expanded": undefined,
        "selected": true,
      }

      202 |
      203 |     const playButton = getByLabelText('Play Test Track');
    > 204 |     expect(playButton.props.accessibilityState).toEqual({ selected: true });
          |                                                 ^
      205 |   });
      206 |
      207 |   it('should have toolbar label for controls', () => {

      at Object.toEqual (__tests__/accessibility/components.a11y.test.tsx:204:49)

PASS __tests__/App.test.tsx (14.537 s)
  ● Console

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [NativeAudioServices] Initialized native audio services

      at log (src/services/audio/native/index.ts:25:11)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

PASS __tests__/performance/components.perf.test.tsx (23.008 s)
  ● Console

    console.log
      Rendered 10 tracks in 1953ms (Jest environment)

      at Object.log (__tests__/performance/components.perf.test.tsx:51:13)

    console.log
      ✓ Performance check passed: Render 10 tracks (Jest) took 1953ms (target: 2000ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      Rendered 20 tracks in 56ms (Jest environment)

      at Object.log (__tests__/performance/components.perf.test.tsx:65:13)

    console.log
      ✓ Performance check passed: Render 20 tracks (Jest) took 56ms (target: 3000ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Update single track took 53ms (target: 100ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Render track item took 7ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      Play track: track-1

      at log (src/components/TrackListItem/TrackListItem.tsx:36:13)

    console.log
      ✓ Performance check passed: Play button update took 0.6ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Volume slider update interval took 0ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: Speed slider update interval took 0.05263157894736842ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      TrackListItem mount stats: {
        name: 'Mount TrackListItem',
        iterations: 20,
        avg: 5.65,
        min: 5,
        max: 9,
        p95: 8
      }

      at Object.log (__tests__/performance/components.perf.test.tsx:183:13)

    console.log
      ✓ Performance check passed: TrackListItem mount (avg) took 5.65ms (target: 50ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: TrackListItem mount (p95) took 8ms (target: 100ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      VolumeSlider mount stats: {
        name: 'Mount VolumeSlider',
        iterations: 20,
        avg: 0.65,
        min: 0,
        max: 1,
        p95: 1
      }

      at Object.log (__tests__/performance/components.perf.test.tsx:202:13)

    console.log
      ✓ Performance check passed: VolumeSlider mount (avg) took 0.65ms (target: 30ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: List update (scrolling simulation) took 31.8ms (target: 100ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.error
      An update to VirtualizedList inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      at node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11801:19
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1574:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11800:9)
      at scheduleUpdateOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10326:9)
      at Object.enqueueSetState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14179:14)
      at VirtualizedList.process.env.NODE_ENV.Component.setState (node_modules/react/cjs/react.development.js:632:20)
      at node_modules/@babel/runtime/helpers/superPropGet.js:6:14
      at VirtualizedList.setState (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/StateSafePureComponent.js:39:7)
      at VirtualizedList.setState [as _updateCellsToRender] (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/VirtualizedList.js:1907:10)
      at Timeout._updateCellsToRender [as _onTimeout] (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/VirtualizedList.js:1804:16)

    console.log
      ✓ Performance check passed: Render 50 tracks took 25ms (target: 2000ms)

      at log (src/test-utils/performanceUtils.ts:163:13)

    console.log
      ✓ Performance check passed: 100 slider updates took 2ms (target: 500ms)

      at log (src/test-utils/performanceUtils.ts:163:13)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "[MockFileManager] Cleaned up 0 temporary files".

      217 |     });
      218 |
    > 219 |     console.log(`[MockFileManager] Cleaned up ${tempFiles.length} temporary files`);
          |             ^
      220 |   }
      221 |
      222 |   /**

      at console.log (node_modules/@jest/console/build/index.js:147:10)
      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS __tests__/integration/screens/MainScreen.test.tsx (15.328 s)
  ● Console

    console.log
      [AudioServiceFactory] Native services registered

      at ServiceRegistry.log [as registerNativeServices] (src/services/audio/AudioServiceFactory.ts:57:13)

    console.log
      [NativeAudioServices] Initialized native audio services

      at log (src/services/audio/native/index.ts:25:11)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cancelling recording

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:120:13)

    console.error
      [NativeAudioRecorder] Error during cancel: TypeError: this.recording.getURI is not a function
          at NativeAudioRecorder.getURI (/home/user/android-looper/Migration/src/services/audio/NativeAudioRecorder.ts:127:36)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      136 |         }
      137 |       } catch (error) {
    > 138 |         console.error('[NativeAudioRecorder] Error during cancel:', error);
          |                 ^
      139 |       }
      140 |
      141 |       this.recording = null;

      at NativeAudioRecorder.error (src/services/audio/NativeAudioRecorder.ts:138:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [NativeAudioRecorder] Cancelling recording

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:120:13)

    console.error
      [NativeAudioRecorder] Error during cancel: TypeError: this.recording.getURI is not a function
          at NativeAudioRecorder.getURI (/home/user/android-looper/Migration/src/services/audio/NativeAudioRecorder.ts:127:36)
          at Generator.next (<anonymous>)
          at asyncGeneratorStep (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
          at _next (/home/user/android-looper/Migration/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

      136 |         }
      137 |       } catch (error) {
    > 138 |         console.error('[NativeAudioRecorder] Error during cancel:', error);
          |                 ^
      139 |       }
      140 |
      141 |       this.recording = null;

      at NativeAudioRecorder.error (src/services/audio/NativeAudioRecorder.ts:138:17)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)

    console.log
      [MockAudioPlayer] Unloading audio

      at MockAudioPlayer.log (src/services/audio/mock/MockAudioPlayer.ts:133:13)
          at Array.map (<anonymous>)

    console.log
      [NativeAudioRecorder] Cleaning up resources

      at NativeAudioRecorder.log (src/services/audio/NativeAudioRecorder.ts:165:13)

    console.log
      [MockFileManager] Cleaning up temporary files

      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:208:13)


  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "[MockFileManager] Cleaned up 0 temporary files".

      217 |     });
      218 |
    > 219 |     console.log(`[MockFileManager] Cleaned up ${tempFiles.length} temporary files`);
          |             ^
      220 |   }
      221 |
      222 |   /**

      at console.log (node_modules/@jest/console/build/index.js:147:10)
      at MockFileManager.log (src/services/audio/mock/MockFileManager.ts:219:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)


Summary of all failing tests
FAIL __tests__/integration/importFlow.test.ts
  ● Import Flow Integration › should complete full import flow

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should handle importing multiple files

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should handle import cancellation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

  ● Import Flow Integration › should preserve existing tracks when importing

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/importFlow.test.ts:31:35)

FAIL __tests__/unit/services/NativeAudioRecorder.test.ts
  ● NativeAudioRecorder › checkPermission › should request and return permissions

    TypeError: recorder.checkPermission is not a function

      53 |       });
      54 |
    > 55 |       const result = await recorder.checkPermission();
         |                                     ^
      56 |
      57 |       expect(result).toBe(true);
      58 |       expect(Audio.requestPermissionsAsync).toHaveBeenCalled();

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:55:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › checkPermission › should return false if permission denied

    TypeError: recorder.checkPermission is not a function

      65 |       });
      66 |
    > 67 |       const result = await recorder.checkPermission();
         |                                     ^
      68 |
      69 |       expect(result).toBe(false);
      70 |     });

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:67:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › checkPermission › should throw AudioError on permission check failure

    TypeError: recorder.checkPermission is not a function

      73 |       (Audio.requestPermissionsAsync as jest.Mock).mockRejectedValue(new Error('Permission error'));
      74 |
    > 75 |       await expect(recorder.checkPermission()).rejects.toThrow(AudioError);
         |                             ^
      76 |       await expect(recorder.checkPermission()).rejects.toThrow(
      77 |         'Failed to check recording permissions'
      78 |       );

      at Object.checkPermission (__tests__/unit/services/NativeAudioRecorder.test.ts:75:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › startRecording › should start recording with permissions

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › startRecording › should throw if permissions denied

    expect(received).rejects.toThrow(expected)

    Expected substring: "Recording permission denied"
    Received message:   "Microphone permission denied"

          68 |       const hasPermission = await this.getPermissions();
          69 |       if (!hasPermission) {
        > 70 |         throw new AudioError(
             |               ^
          71 |           AudioErrorCode.PERMISSION_DENIED,
          72 |           'Microphone permission denied',
          73 |           undefined,

      at NativeAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:70:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/NativeAudioRecorder.test.ts:107:55)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › startRecording › should throw if already recording

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should stop recording and return URI

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should throw if not recording

    expect(received).rejects.toThrow(expected)

    Expected substring: "No active recording"
    Received message:   "Cannot stop recording: not recording"

          110 |   public async stopRecording(): Promise<string> {
          111 |     if (!this._isRecording) {
        > 112 |       throw new AudioError(
              |             ^
          113 |         AudioErrorCode.RECORDING_FAILED,
          114 |         'Cannot stop recording: not recording',
          115 |         'No recording in progress'

      at NativeAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:112:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as stopRecording] (src/services/audio/BaseAudioRecorder.ts:110:29)
      at Object.stopRecording (__tests__/unit/services/NativeAudioRecorder.test.ts:134:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/NativeAudioRecorder.test.ts:134:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › stopRecording › should throw if stop fails

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › getDuration › should return recording duration

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● NativeAudioRecorder › getDuration › should return 0 if no recording

    TypeError: recorder.getDuration is not a function

      163 |
      164 |     it('should return 0 if no recording', async () => {
    > 165 |       const duration = await recorder.getDuration();
          |                                       ^
      166 |       expect(duration).toBe(0);
      167 |     });
      168 |   });

      at Object.getDuration (__tests__/unit/services/NativeAudioRecorder.test.ts:165:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeAudioRecorder › cleanup › should cleanup recording instance

    AudioError: Failed to start recording: Cannot read properties of undefined (reading 'MPEG_4')

      44 |       }
      45 |
    > 46 |       throw new AudioError(
         |             ^
      47 |         AudioErrorCode.RECORDING_FAILED,
      48 |         `Failed to start recording: ${(error as Error).message}`,
      49 |         'Failed to start recording. Please check your microphone and try again.'

      at NativeAudioRecorder.<anonymous> (src/services/audio/NativeAudioRecorder.ts:46:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at NativeAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at NativeAudioRecorder.apply [as _startRecording] (src/services/audio/NativeAudioRecorder.ts:20:34)
      at NativeAudioRecorder._startRecording (src/services/audio/BaseAudioRecorder.ts:87:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL __tests__/integration/recordingFlow.test.ts
  ● Recording Flow Integration › should complete full recording flow

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle recording cancellation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle multiple recordings sequentially

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should handle recording errors gracefully

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

  ● Recording Flow Integration › should prevent simultaneous recordings

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/integration/recordingFlow.test.ts:22:35)

FAIL __tests__/platform/platformVerification.test.ts (7.761 s)
  ● Platform Verification › should provide platform version information

    expect(received).toBeDefined()

    Received: undefined

      23 |       expect(Platform.Version).toBeUndefined(); // Web doesn't have version
      24 |     } else {
    > 25 |       expect(Platform.Version).toBeDefined();
         |                                ^
      26 |       console.log(`Platform version: ${Platform.Version}`);
      27 |     }
      28 |   });

      at Object.toBeDefined (__tests__/platform/platformVerification.test.ts:25:32)

  ● Platform-Specific Services › Audio Service › should provide correct audio service for platform

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:34:43)

  ● Platform-Specific Services › Audio Service › should have platform-specific implementation

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:47:43)

  ● Platform-Specific Services › File Importer › should have platform-specific implementation

    expect(received).toContain(expected) // indexOf

    Expected substring: "Native"
    Received string:    "Function"

      71 |         expect(fileImporter.constructor.name).toContain('Web');
      72 |       } else {
    > 73 |         expect(fileImporter.constructor.name).toContain('Native');
         |                                               ^
      74 |       }
      75 |     });
      76 |   });

      at Object.toContain (__tests__/platform/platformVerification.test.ts:73:47)

  ● Platform-Specific Services › FFmpeg Service › should have platform-specific configuration

    expect(received).toContain(expected) // indexOf

    Expected substring: "Native"
    Received string:    "FFmpegService"

       95 |       } else {
       96 |         // Native uses FFmpeg Kit
    >  97 |         expect(ffmpegService.constructor.name).toContain('Native');
          |                                                ^
       98 |       }
       99 |     });
      100 |   });

      at Object.toContain (__tests__/platform/platformVerification.test.ts:97:48)

  ● Error Handling › should handle platform-specific errors

    AudioError: Audio services not registered for platform: iOS

      130 |     if (!platformServices) {
      131 |       const platformName = getPlatformName();
    > 132 |       throw new AudioError(
          |             ^
      133 |         AudioErrorCode.RESOURCE_UNAVAILABLE,
      134 |         `Audio services not registered for platform: ${platformName}`,
      135 |         `Audio services unavailable on ${platformName}. Please ensure platform-specific services are registered.`

      at AudioServiceFactoryClass.createAudioService (src/services/audio/AudioServiceFactory.ts:132:13)
      at AudioServiceFactoryClass.createAudioService [as getAudioService] (src/services/audio/AudioServiceFactory.ts:185:40)
      at getAudioService (src/services/audio/AudioServiceFactory.ts:265:30)
      at Object.<anonymous> (__tests__/platform/platformVerification.test.ts:176:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL __tests__/unit/services/WebAudioRecorder.test.ts
  ● WebAudioRecorder › checkPermission › should check media device permissions

    TypeError: recorder.checkPermission is not a function

      45 |     it('should check media device permissions', async () => {
      46 |       recorder = new WebAudioRecorder();
    > 47 |       const hasPermission = await recorder.checkPermission();
         |                                            ^
      48 |
      49 |       expect(hasPermission).toBe(true);
      50 |       expect(navigator.mediaDevices.getUserMedia).toHaveBeenCalledWith({

      at Object.checkPermission (__tests__/unit/services/WebAudioRecorder.test.ts:47:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebAudioRecorder › checkPermission › should return false if permission denied

    TypeError: recorder.checkPermission is not a function

      59 |
      60 |       recorder = new WebAudioRecorder();
    > 61 |       const hasPermission = await recorder.checkPermission();
         |                                            ^
      62 |
      63 |       expect(hasPermission).toBe(false);
      64 |     });

      at Object.checkPermission (__tests__/unit/services/WebAudioRecorder.test.ts:61:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebAudioRecorder › startRecording › should start recording with permissions

    AudioError: Failed to start recording: MediaRecorder.isTypeSupported is not a function

      89 |       }
      90 |
    > 91 |       throw new AudioError(
         |             ^
      92 |         AudioErrorCode.RECORDING_FAILED,
      93 |         `Failed to start recording: ${(error as Error).message}`,
      94 |         'Failed to start recording. Please check your microphone and try again.'

      at WebAudioRecorder.<anonymous> (src/services/audio/WebAudioRecorder.ts:91:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › startRecording › should throw if already recording

    AudioError: Failed to start recording: MediaRecorder.isTypeSupported is not a function

      89 |       }
      90 |
    > 91 |       throw new AudioError(
         |             ^
      92 |         AudioErrorCode.RECORDING_FAILED,
      93 |         `Failed to start recording: ${(error as Error).message}`,
      94 |         'Failed to start recording. Please check your microphone and try again.'

      at WebAudioRecorder.<anonymous> (src/services/audio/WebAudioRecorder.ts:91:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › startRecording › should use supported mime type

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"getTracks": [Function mockConstructor]},
    - ObjectContaining {"mimeType": StringContaining "mp4"},
    + {"audioBitsPerSecond": 128000, "mimeType": "audio/webm"},

    Number of calls: 1

      108 |       await recorder.startRecording();
      109 |
    > 110 |       expect(MediaRecorder).toHaveBeenCalledWith(
          |                             ^
      111 |         mockStream,
      112 |         expect.objectContaining({
      113 |           mimeType: expect.stringContaining('mp4'),

      at Object.toHaveBeenCalledWith (__tests__/unit/services/WebAudioRecorder.test.ts:110:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › stopRecording › should stop recording and return blob URL

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      141 |       const uri = await stopPromise;
      142 |
    > 143 |       expect(mockMediaRecorder.stop).toHaveBeenCalled();
          |                                      ^
      144 |       expect(uri).toBe('blob:http://localhost/test');
      145 |     });
      146 |

      at Object.toHaveBeenCalled (__tests__/unit/services/WebAudioRecorder.test.ts:143:38)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › stopRecording › should throw if not recording

    expect(received).rejects.toThrow(expected)

    Expected substring: "No active recording"
    Received message:   "Cannot stop recording: not recording"

          110 |   public async stopRecording(): Promise<string> {
          111 |     if (!this._isRecording) {
        > 112 |       throw new AudioError(
              |             ^
          113 |         AudioErrorCode.RECORDING_FAILED,
          114 |         'Cannot stop recording: not recording',
          115 |         'No recording in progress'

      at WebAudioRecorder.<anonymous> (src/services/audio/BaseAudioRecorder.ts:112:13)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at WebAudioRecorder.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)
      at WebAudioRecorder.apply [as stopRecording] (src/services/audio/BaseAudioRecorder.ts:110:29)
      at Object.stopRecording (__tests__/unit/services/WebAudioRecorder.test.ts:151:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (__tests__/unit/services/WebAudioRecorder.test.ts:151:54)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● WebAudioRecorder › getDuration › should return 0 for web (duration not tracked)

    TypeError: recorder.getDuration is not a function

      171 |     it('should return 0 for web (duration not tracked)', async () => {
      172 |       recorder = new WebAudioRecorder();
    > 173 |       const duration = await recorder.getDuration();
          |                                       ^
      174 |
      175 |       expect(duration).toBe(0);
      176 |     });

      at Object.getDuration (__tests__/unit/services/WebAudioRecorder.test.ts:173:39)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL __tests__/unit/services/FileImporter.test.ts
  ● NativeFileImporter › pickAudioFile › should return selected audio file

    TypeError: importer.pickAudioFile is not a function

      31 |       });
      32 |
    > 33 |       const result = await importer.pickAudioFile();
         |                                     ^
      34 |
      35 |       expect(result).toEqual({
      36 |         uri: 'file://test-audio.mp3',

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:33:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should throw if user cancelled

    TypeError: importer.pickAudioFile is not a function

      46 |       });
      47 |
    > 48 |       await expect(importer.pickAudioFile()).rejects.toThrow(AudioError);
         |                             ^
      49 |       await expect(importer.pickAudioFile()).rejects.toThrow('File selection cancelled');
      50 |     });
      51 |

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:48:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should throw on picker error

    TypeError: importer.pickAudioFile is not a function

      53 |       (DocumentPicker.getDocumentAsync as jest.Mock).mockRejectedValue(new Error('Picker error'));
      54 |
    > 55 |       await expect(importer.pickAudioFile()).rejects.toThrow(AudioError);
         |                             ^
      56 |       await expect(importer.pickAudioFile()).rejects.toThrow('Failed to open file picker');
      57 |     });
      58 |

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:55:29)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● NativeFileImporter › pickAudioFile › should use correct mime types for audio files

    TypeError: importer.pickAudioFile is not a function

      58 |
      59 |     it('should use correct mime types for audio files', async () => {
    > 60 |       await importer.pickAudioFile();
         |                      ^
      61 |
      62 |       expect(DocumentPicker.getDocumentAsync).toHaveBeenCalledWith({
      63 |         type: ['audio/*', 'audio/mpeg', 'audio/mp4', 'audio/wav', 'audio/webm'],

      at Object.pickAudioFile (__tests__/unit/services/FileImporter.test.ts:60:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● WebFileImporter › pickAudioFile › should return selected file with blob URL

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should throw if no file selected

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should create input with audio accept types

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

  ● WebFileImporter › pickAudioFile › should trigger click on input

    The error below may be caused by using the wrong test environment, see https://jestjs.io/docs/configuration#testenvironment-string.
    Consider using the "jsdom" test environment.

    ReferenceError: document is not defined

      77 |
      78 |     // Mock file input element
    > 79 |     mockInput = document.createElement('input');
         |     ^
      80 |     jest.spyOn(document, 'createElement').mockReturnValue(mockInput);
      81 |   });
      82 |

      at Object.mockInput (__tests__/unit/services/FileImporter.test.ts:79:5)

FAIL __tests__/performance/stores.perf.test.ts (7.922 s)
  ● Performance - PlaybackStore › should update track state quickly

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).updateTrackState is not a function

      146 |
      147 |     const { duration } = await measureDuration(async () => {
    > 148 |       usePlaybackStore.getState().updateTrackState('track-1', { volume: 50 });
          |                                   ^
      149 |     });
      150 |
      151 |     const benchmark = assertPerformance('Update track state', duration, 10);

      at updateTrackState (__tests__/performance/stores.perf.test.ts:148:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at fn (src/test-utils/performanceUtils.ts:28:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test-utils/performanceUtils.ts:24:38)
      at Object.<anonymous> (__tests__/performance/stores.perf.test.ts:147:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  ● Performance - PlaybackStore › should start playing track quickly

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).setPlaying is not a function

      178 |
      179 |     const { duration } = await measureDuration(async () => {
    > 180 |       usePlaybackStore.getState().setPlaying('track-1', true);
          |                                   ^
      181 |     });
      182 |
      183 |     const benchmark = assertPerformance('Set track playing', duration, 10);

      at setPlaying (__tests__/performance/stores.perf.test.ts:180:35)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at fn (src/test-utils/performanceUtils.ts:28:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (src/test-utils/performanceUtils.ts:24:38)
      at Object.<anonymous> (__tests__/performance/stores.perf.test.ts:179:47)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

FAIL e2e/web/import.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/import.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 | import path from 'path';
       9 |
      10 | test.describe('Import Flow', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/import.spec.ts:7:1)

FAIL __tests__/unit/utils/permissions.test.ts
  ● Permissions Utils › requestMicrophonePermission › iOS/Web › should return true on iOS (handled by expo-av)

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should request Android permission and return true if granted

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should return false if permission denied

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestMicrophonePermission › Android › should return false if never ask again

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › iOS/Web › should return true on iOS (handled by system)

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › Android › should request storage permission on Android

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › requestStoragePermission › Android › should return false if storage permission denied

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › Web platform › should return true for microphone on web

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      41 |     console.error('[Permissions] Microphone permission error:', error);
      42 |     return {
    > 43 |       status: PermissionStatus.DENIED,
         |                                ^
      44 |       canAskAgain: false,
      45 |     };
      46 |   }

      at DENIED (src/utils/permissions.native.ts:43:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  ● Permissions Utils › Web platform › should return true for storage on web

    TypeError: Cannot read properties of undefined (reading 'DENIED')

      61 |     console.error('[Permissions] Storage permission error:', error);
      62 |     return {
    > 63 |       status: PermissionStatus.DENIED,
         |                                ^
      64 |       canAskAgain: false,
      65 |     };
      66 |   }

      at DENIED (src/utils/permissions.native.ts:63:32)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

FAIL e2e/web/mixing.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/mixing.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 |
       9 | test.describe('Mixing Flow', () => {
      10 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/mixing.spec.ts:7:1)

FAIL e2e/web/playback.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/playback.spec.ts'

       5 |  */
       6 |
    >  7 | import { test, expect } from '@playwright/test';
         | ^
       8 |
       9 | test.describe('Playback Flow', () => {
      10 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/playback.spec.ts:7:1)

FAIL e2e/web/recording.spec.ts
  ● Test suite failed to run

    Cannot find module '@playwright/test' from 'e2e/web/recording.spec.ts'

       6 |  */
       7 |
    >  8 | import { test, expect } from '@playwright/test';
         | ^
       9 |
      10 | test.describe('Recording Flow', () => {
      11 |   test.beforeEach(async ({ page, context }) => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (e2e/web/recording.spec.ts:8:1)

FAIL __tests__/load/loadTests.test.ts (8.544 s)
  ● Stress Tests - Rapid Operations › should handle rapid playback state changes

    TypeError: _usePlaybackStore.usePlaybackStore.getState(...).setPlaying is not a function

      206 |
      207 |     for (let i = 0; i < operations; i++) {
    > 208 |       usePlaybackStore.getState().setPlaying(track.id, i % 2 === 0);
          |                                   ^
      209 |     }
      210 |
      211 |     const endTime = performance.now();

      at Object.setPlaying (__tests__/load/loadTests.test.ts:208:35)

  ● Performance Degradation Tests › should maintain performance with increasing track count

    expect(received).toBeLessThan(expected)

    Expected: < 3.75
    Received:   Infinity

      329 |       // Time should scale roughly linearly (not exponentially)
      330 |       // Allow 50% overhead for overhead
    > 331 |       expect(timeRatio).toBeLessThan(countRatio * 1.5);
          |                         ^
      332 |
      333 |       console.log(
      334 |         `${curr.count} tracks: ${curr.time}ms (vs ${prev.count} tracks: ${prev.time}ms, ratio: ${timeRatio.toFixed(2)})`

      at Object.toBeLessThan (__tests__/load/loadTests.test.ts:331:25)

  ● Performance Degradation Tests › should maintain update performance regardless of track count

    expect(received).toBeLessThan(expected)

    Expected: < 2
    Received:   4

      372 |
      373 |       // Update time shouldn't grow more than 2x
    > 374 |       expect(ratio).toBeLessThan(2.0);
          |                     ^
      375 |     }
      376 |   });
      377 | });

      at Object.toBeLessThan (__tests__/load/loadTests.test.ts:374:21)

FAIL __tests__/unit/hooks/useAppLifecycle.test.ts
  ● useAppLifecycle › should call onBackground when app goes to background

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      58 |     callback('background');
      59 |
    > 60 |     expect(onBackground).toHaveBeenCalledTimes(1);
         |                          ^
      61 |     expect(onActive).not.toHaveBeenCalled();
      62 |   });
      63 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:60:26)

  ● useBackgroundHandler › should call onBackground when app goes to background

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      150 |     callback('background');
      151 |
    > 152 |     expect(onBackground).toHaveBeenCalledTimes(1);
          |                          ^
      153 |     expect(onForeground).not.toHaveBeenCalled();
      154 |   });
      155 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:152:26)

  ● useBackgroundHandler › should work without onForeground callback

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      180 |     }).not.toThrow();
      181 |
    > 182 |     expect(onBackground).toHaveBeenCalledTimes(1);
          |                          ^
      183 |   });
      184 | });
      185 |

      at Object.toHaveBeenCalledTimes (__tests__/unit/hooks/useAppLifecycle.test.ts:182:26)

FAIL __tests__/accessibility/components.a11y.test.tsx (22.378 s)
  ● Accessibility - VolumeSlider › should have adjustable role

    Unable to find an element with role: adjustable

    [36m<RNCSafeAreaProvider>[39m
      [36m<View[39m
        [33mpointerEvents[39m=[32m"box-none"[39m
      [36m>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mVolume: [0m
            [0m75[0m
          [36m</Text>[39m
          [36m<View>[39m
            [36m<RNCSlider[39m
              [33maccessibilityHint[39m=[32m"Adjust track volume from 0 to 100 percent"[39m
              [33maccessibilityLabel[39m=[32m"Volume"[39m
              [33maccessibilityRole[39m=[32m"adjustable"[39m
              [33maccessibilityState[39m=[32m{
                {
                  "disabled": false,
                }
              }[39m
              [33maccessibilityValue[39m=[32m{
                {
                  "text": "75 percent",
                }
              }[39m
              [33mtestID[39m=[32m"slider"[39m
              [33mvalue[39m=[32m{75}[39m
            [36m/>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</RNCSafeAreaProvider>[39m

       99 |     });
      100 |
    > 101 |     expect(getByRole('adjustable')).toBeDefined();
          |            ^
      102 |   });
      103 |
      104 |   it('should have accessibility hint', () => {

      at Object.getByRole (__tests__/accessibility/components.a11y.test.tsx:101:12)

  ● Accessibility - SpeedSlider › should have adjustable role

    Unable to find an element with role: adjustable

    [36m<RNCSafeAreaProvider>[39m
      [36m<View[39m
        [33mpointerEvents[39m=[32m"box-none"[39m
      [36m>[39m
        [36m<View>[39m
          [36m<Text>[39m
            [0mSpeed: [0m
            [0m1.00[0m
            [0mx[0m
          [36m</Text>[39m
          [36m<View>[39m
            [36m<RNCSlider[39m
              [33maccessibilityHint[39m=[32m"Adjust playback speed from 0.05 to 2.50 times"[39m
              [33maccessibilityLabel[39m=[32m"Playback speed"[39m
              [33maccessibilityRole[39m=[32m"adjustable"[39m
              [33maccessibilityState[39m=[32m{
                {
                  "disabled": false,
                }
              }[39m
              [33maccessibilityValue[39m=[32m{
                {
                  "text": "1.00 times",
                }
              }[39m
              [33mtestID[39m=[32m"slider"[39m
              [33mvalue[39m=[32m{41}[39m
            [36m/>[39m
          [36m</View>[39m
        [36m</View>[39m
      [36m</View>[39m
    [36m</RNCSafeAreaProvider>[39m

      135 |     });
      136 |
    > 137 |     expect(getByRole('adjustable')).toBeDefined();
          |            ^
      138 |   });
      139 |
      140 |   it('should announce max speed correctly', () => {

      at Object.getByRole (__tests__/accessibility/components.a11y.test.tsx:137:12)

  ● Accessibility - TrackListItem › should announce playing state

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 4

      Object {
    +   "busy": undefined,
    +   "checked": undefined,
    +   "disabled": false,
    +   "expanded": undefined,
        "selected": true,
      }

      202 |
      203 |     const playButton = getByLabelText('Play Test Track');
    > 204 |     expect(playButton.props.accessibilityState).toEqual({ selected: true });
          |                                                 ^
      205 |   });
      206 |
      207 |   it('should have toolbar label for controls', () => {

      at Object.toEqual (__tests__/accessibility/components.a11y.test.tsx:204:49)


Test Suites: 15 failed, 28 passed, 43 total
Tests:       63 failed, 3 skipped, 536 passed, 602 total
Snapshots:   0 total
Time:        25.545 s
Ran all test suites.
